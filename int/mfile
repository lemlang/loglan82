SHELL=/bin/bash
#.SUFFIXES: .o .c

#############################################################################
# switches :
# OBJECTADDR - switch on special process addressing - object simulates
#              process pointer
# CDBG - turn on debugging of compactifier, compactifier appends to file
#        'trace' state of memory before & after the compactification,
#        also a history of compactification & process number is dumped
# RPCDBG - debugging of alien call, all actions : alien call, acknowledges,
#          passivations and returns are written to stderr
# NO_GRAPH -    nonstand.c defines only INKEY grom IIUWGRAPH
# DLINK    -    DLINK network version
# TCPIP    -    TCPIP network version - needs also OBJECTADDR
#
# switches depending on environment :
# TURBOC - if using BORLAND TURBO-C compiler
# MSDOS/OS2/UNIX - choose operating system
# USE_CLOCK - scheduler should use clock() function to measure time
# USE_ALARM - scheduler should use alarm() function to measure time
# WORD_16BIT/DWORD_16BIT/WORD_32BIT - choose memory model :
#        small 16-bit / large 16-bit / small 32-bit
#

        
UNIXPARS=-DUNIX -DWORD_32BIT -DUSE_CLOCK -Dpascal=
UNIXPARSNG=$(UNIXPARS)

#CC=cc $(UNIXPARSNG) -DNO_PROTOTYPES            # SUN,HP
#CC=rcc $(UNIXPARSNG) -O                        # SCO - AT&T C compiler
#CC=cc -W1 $(UNIXPARSNG)                        # SCO
#CC=cc -W1 $(UNIXPARSNG) -DOBJECTADDR           # SCO
#CC=cc -W1 $(UNIXPARSNG) -DOBJECTADDR -DTCPIP   # SCO TCPIP
CC=gcc $(UNIXPARSNG) -DOBJECTADDR -DSYSV -I$(QINC)    # GNU C++ TCPIP
#CC=cc -W1 $(UNIXPARS) -DSYSV -DXSIGHT          # SCO with X11 graphics
#CC=gcc -g $(UNIXPARS) -DSYSV -DXSIGHT          # SCO GCC with X11 graphics

CCc=$(CC)                                       # common version
#CCc=$(CC) -Fo$*.o                              # MSDOS MSC version

target : int

#############################################################################
#ADDOPT = -lsocket # sun
ADDOPT =  $(QLINK) # Linux


OBJ= cint.o compact.o control.o util.o handler.o intdt.o        \
     memory.o object.o runsys.o standard.o                      \
     execute.o fileio.o nonstand.o process.o procaddr.o queue.o \
     rpcall.o typchk.o  

.c.o :
	$(CCc) -c  $*.c
.s.o:
	as -o $*.o $*.s


int: $(OBJ) 
#	$(CC) $(OBJ) inkeyux.o -lm -lX11 -lmalloc -lsocket -ggdb -o int
	$(CC) $(OBJ) -lm $(ADDOPT) -o logint
#	strip logint
#	mv int $(HOME)/LOGLAN.PAU/bin

nonstand.o : nonstand.c

clean :
	rm -f *.o *.bak logint
